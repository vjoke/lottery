# lottery

彩票
该智能合约实现了一个简单的彩票系统。 针对现有彩票系统， 由于条约公开在条约外无法随意篡改的特性， 天然具备稳定性和中立性。

该智能合约中二种角色如下：

彩票发行人 Authority
投注人 Player


发行人发起交易，将彩票类型、彩票底金、投注范围、投注时间、彩票钱包地址及私钥、发行人钱包地址等数据写入区块，生成第一张彩票即奖池。投注人投注导入彩票池信息，然后与发行人写入区块中的彩票信息进行核对，如果彩票有效，将发起交易，即投注，投注成功后，也会将自己的钱包地址、投注号码、投注金额等数据写入区块。生成自己的彩票即投注券。直到目标区块出现，中奖号码产生，这之后奖券持有人导入彩票信息与区块核对，如果有效即可领奖，领奖成功后，写入区块中注明。至此，领奖成功。

通过上述过程不难发现，“彩票”发行的每一个环节，都被写入到了区块链中，防止恶意的作弊行为。发行人将彩票发行信息写入到区块中，彩票投注者将投注信息写到区块链中，中奖的人也将自己兑奖信息写入到区块中，这就形成一个完整的闭环系统，三者之间互相制约。在区块链这本大帐单中，保留了彩票交易每个细节，被全网用户所共同享有，任何单方面的作弊行为，都会被网络拒绝。

账户私钥应该由安装在本地的客户端生成，本合约中为了简便，使用模拟私钥和公钥。

数据结构设计

发行人
	姓名
	钱包地址
	私钥
	公钥

奖池
	类型
	底金
	投注范围
	投注时间
	彩票钱包地址
	私钥
	发行人钱包地址

投注券
	姓名
	钱包地址
	投注号码
	投注金额

兑奖
	姓名
	中奖号码
	中奖金额
	中奖人钱包地址

对彩票的所有操作都归为记录。


function及各自实现的功能
	init 初始化函数，并生成奖池
	invoke 调用合约内部的函数
	query 查询相关的信息

	createAuthority 创建彩票发行方
	createPlayer 创建玩家
	
	createLottery
	drawLottery
	closeLottery

	buyTicket
	takePrize

